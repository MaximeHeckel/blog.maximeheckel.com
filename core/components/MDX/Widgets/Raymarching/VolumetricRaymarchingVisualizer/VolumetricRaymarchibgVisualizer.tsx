import {
  Box,
  Button,
  Card,
  Flex,
  Grid,
  Icon,
  Range,
  Text,
  Tooltip,
} from '@maximeheckel/design-system';
import { motion } from 'framer-motion';
import React, { useMemo, useState } from 'react';
import { HighlightedValue } from '../../Components';

interface CellProps {
  value: number;
  x: number;
  y: number;
  step: number;
}

const Cell = (props: CellProps) => {
  const { value, x, y } = props;

  let color = 'var(--gray-000)';

  if (value > 0.1) {
    color = `rgba(87, 134, 245, ${value})`;
  }

  return (
    <Flex
      alignItems="center"
      css={{
        aspectRatio: '1 / 1',
        borderBottom: '0.5px solid var(--gray-700)',
        borderLeft: '0.5px solid var(--gray-700)',
        backgroundColor: color,
        overflow: 'hidden',
      }}
      justifyContent="center"
    >
      {(x === 0 && y === 0) ||
      (x === 1 && y === 1) ||
      (x === 0 && y === 1) ||
      (x === 1 && y === 0) ||
      (x === 0.5 && y === 0.5) ? (
        <Text role="presentation" css={{ fontSize: 10 }}>
          {x - 0.5},{y - 0.5}
        </Text>
      ) : null}
    </Flex>
  );
};

const fakeSphereSDF = (_x: number, _y: number, step: number) => {
  const alpha = 0.8 * step;

  if (alpha > 5) {
    return 0.0;
  }

  return (
    (1.0 -
      Math.sqrt((_x - 0.5) * (_x - 0.5) + (_y - 0.5) * (_y - 0.5)) * alpha) /
    (alpha * 0.3)
  );
};

const SIZE = 18;
const MAX_STEP = 9;

const VolumetricRaymarchingVisualizer = () => {
  const [step, setStep] = useState(0);

  const emptyMatrix = useMemo(
    () =>
      Array(SIZE)
        .fill(null)
        .map(() => Array(SIZE).fill(null)),
    []
  );

  const matrix = useMemo(
    () =>
      emptyMatrix
        .map((row, y) =>
          row.map((_, x) =>
            fakeSphereSDF(
              x / (row.length - 1),
              y / (emptyMatrix.length - 1),
              MAX_STEP - step + 3.0
            )
          )
        )
        .reverse(),
    [emptyMatrix, step]
  );

  const restart = () => setStep(0);

  const nextStep = () => {
    setStep((prev) => {
      if (prev < MAX_STEP) {
        return prev + 1;
      }
      return prev;
    });
  };

  return (
    <Card css={{ width: '100%' }}>
      <Card.Body
        as={Flex}
        direction="column"
        dotMatrix
        justifyContent="center"
        gap="6"
      >
        <Grid
          css={{
            borderTop: '0.5px solid var(--gray-700)',
            borderRight: '0.5px solid var(--gray-700)',
            overflow: 'hidden',
            width: '100%',
          }}
          templateColumns={`repeat(${SIZE}, 1fr)`}
        >
          {matrix.map((row, idy) => (
            <React.Fragment key={idy}>
              {row.map((value, idx) => (
                <Cell
                  key={`${value}-${idx}-${idy}`}
                  x={idx / (row.length - 1)}
                  y={(matrix.length - 1 - idy) / (matrix.length - 1)}
                  value={value}
                  step={step}
                />
              ))}
            </React.Fragment>
          ))}
        </Grid>

        <Flex
          css={{
            background: 'var(--maximeheckel-colors-emphasis)',
            width: '100%',
            height: 'fit-content',
            border: '1px solid var(--maximeheckel-border-color)',
            borderRadius: 'var(--border-radius-2)',
            padding: 'var(--space-5)',
          }}
          justifyContent="center"
        >
          <Diagram step={step} />
        </Flex>
        <Flex alignItems="center" css={{ width: '100%' }} gap="3">
          <Tooltip content="Reset">
            <Button icon={<Icon.Repeat />} onClick={restart} variant="icon" />
          </Tooltip>
          <Tooltip content="Next Step">
            <Button
              disabled={step === MAX_STEP}
              icon={<Icon.Arrow />}
              onClick={nextStep}
              variant="icon"
            />
          </Tooltip>
          <Range
            id="timeline"
            aria-label="Timeline"
            min={0}
            max={MAX_STEP}
            step={1}
            value={step}
            onChange={(value) => {
              setStep(value);
            }}
          />
          <Box css={{ flexShrink: 0 }}>
            <Text size="1">
              Step:{' '}
              <HighlightedValue css={{ width: 34 }}>{step}</HighlightedValue>
            </Text>
          </Box>
        </Flex>
      </Card.Body>
    </Card>
  );
};

const Diagram = (props: { step: number }) => {
  const { step } = props;

  const pathVariants = {
    initial: {
      pathLength: 0,
    },
    revealed: {
      pathLength: step / MAX_STEP,
      transition: {
        duration: 0.3,
        ease: 'easeInOut',
      },
    },
  };

  return (
    <svg
      width="90%"
      height="100%"
      viewBox="0 0 355 247"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M175.357 245.995L151.426 232.178C159.313 219.412 190.893 219.804 198.457 232.658L175.357 245.995Z"
        fill="white"
        stroke="black"
        strokeWidth="0.5"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M223.055 76.7371L243.747 88.4443L265.043 75.9002L244.35 64.193L223.055 76.7371ZM200.791 89.8514L221.483 101.559L242.779 89.0145L222.087 77.3073L200.791 89.8514ZM178.528 102.965L199.823 90.4216L220.515 102.129L199.22 114.673L199.22 114.673L178.528 102.965ZM177.559 103.536L177.493 103.498L177.493 103.498L156.198 116.042L176.956 127.787L198.252 115.243L177.559 103.536ZM155.836 91.2457L155.86 91.2591L155.93 91.2987L176.595 102.99L155.3 115.534L134.541 103.79L155.836 91.2457ZM134.207 79.0085L134.231 79.0219L134.301 79.0615L154.896 90.7137L133.601 103.258L112.912 91.5524L134.207 79.0085ZM112.578 66.7713L112.602 66.7847L112.672 66.8243L133.267 78.4765L111.972 91.0203L91.2828 79.3152L112.578 66.7713ZM90.8788 54.4945L90.9725 54.5475L111.638 66.2393L90.3424 78.7831L69.5836 67.0384L90.8788 54.4945ZM112.7 65.7218L112.676 65.7085L112.606 65.6688L91.9409 53.9771L113.236 41.4332L133.995 53.178L112.7 65.7218ZM134.329 77.959L134.305 77.9457L134.235 77.906L113.64 66.2539L134.935 53.71L155.624 65.4151L134.329 77.959ZM155.958 90.1962L155.934 90.1829L155.864 90.1432L135.269 78.4911L156.565 65.9472L177.253 77.6523L155.958 90.1962ZM198.886 89.8916L177.591 102.435L177.591 102.435L177.564 102.42L156.898 90.7283L178.194 78.1844L198.886 89.8916ZM221.15 76.7773L199.854 89.3214L179.162 77.6142L200.457 65.0701L221.15 76.7773ZM243.414 63.663L222.118 76.2071L201.425 64.4999L222.721 51.9558L243.414 63.663ZM265.784 50.486L244.382 63.0928L223.689 51.3856L245.091 38.7788L265.784 50.486ZM91.0706 53.4846L90.9769 53.4316L90.1153 53.9392L68.7132 66.5459L68.6068 66.6086L67.8516 67.0535L67.7452 67.1161L46.4495 79.6603L46.3431 79.7229L45.5879 80.1678L45.4815 80.2305L24.1858 92.7746L24.0794 92.8372L23.3242 93.2821L23.2178 93.3448L1.81575 105.952L0.954121 106.459L1.82448 106.952L22.5833 118.696L22.6533 118.736L23.4537 119.189L23.5237 119.228L44.2125 130.933L44.2825 130.973L45.0828 131.426L45.1529 131.466L65.8416 143.171L65.9117 143.21L66.712 143.663L66.782 143.703L87.5409 155.448L87.5681 155.463L88.4112 155.94L88.4385 155.955L109.197 167.7L109.267 167.74L110.068 168.193L110.138 168.232L130.826 179.937L130.896 179.977L131.697 180.43L131.767 180.469L152.456 192.175L152.526 192.214L153.326 192.667L153.396 192.707L174.155 204.451L175.025 204.944L175.887 204.436L197.289 191.829L197.395 191.767L198.151 191.322L198.257 191.259L219.553 178.715L219.659 178.652L220.414 178.208L220.521 178.145L241.816 165.601L241.923 165.538L242.678 165.093L242.784 165.031L264.08 152.487L264.941 151.979L286.343 139.372L286.45 139.31L287.205 138.865L287.311 138.802L308.607 126.258L308.713 126.195L309.469 125.751L309.575 125.688L330.871 113.144L330.977 113.081L331.732 112.636L331.839 112.574L353.241 99.9669L354.102 99.4593L353.232 98.9669L332.473 87.2221L332.403 87.1825L331.603 86.7297L331.533 86.6901L310.844 74.9849L310.774 74.9453L309.974 74.4925L309.904 74.4529L289.215 62.7477L289.145 62.7081L288.345 62.2553L288.274 62.2157L267.582 50.5084L267.516 50.4709L266.712 50.016L266.645 49.9785L245.953 38.2713L245.883 38.2316L245.082 37.7788L245.012 37.7392L224.324 26.0341L224.254 25.9944L223.453 25.5416L223.383 25.502L202.694 13.7969L202.624 13.7572L201.824 13.3044L201.754 13.2648L180.995 1.52003L180.125 1.02761L179.263 1.53515L157.861 14.1419L157.755 14.2046L157 14.6495L156.893 14.7121L135.598 27.2562L135.491 27.3189L134.736 27.7638L134.63 27.8264L113.334 40.3706L113.227 40.4332L112.472 40.8781L112.366 40.9408L91.0706 53.4846ZM266.72 51.016L287.413 62.7232L266.011 75.33L245.318 63.6228L266.72 51.016ZM287.64 87.5672L266.951 75.862L288.353 63.2553L309.042 74.9604L287.64 87.5672ZM288.58 88.0992L309.269 99.8044L330.671 87.1976L309.982 75.4925L288.58 88.0992ZM330.968 112.081L352.37 99.4744L331.612 87.7297L310.21 100.336L330.968 112.081ZM242.145 114.366L220.849 126.91L200.161 115.205L221.456 102.661L242.145 114.366ZM263.774 126.603L242.478 139.147L221.79 127.442L243.085 114.898L263.774 126.603ZM285.473 138.88L264.178 151.424L243.419 139.679L264.714 127.135L285.473 138.88ZM177.897 128.319L199.192 115.775L199.192 115.775L219.881 127.48L198.586 140.024L177.897 128.319ZM199.526 140.556L220.821 128.012L241.51 139.718L220.215 152.261L199.526 140.556ZM221.155 152.793L242.45 140.25L263.209 151.994L241.914 164.538L221.155 152.793ZM308.705 125.196L330 112.651L309.242 100.907L287.946 113.451L308.705 125.196ZM286.978 114.021L265.682 126.565L286.441 138.31L307.737 125.766L286.978 114.021ZM308.301 100.375L287.612 88.6694L266.317 101.214L287.005 112.919L308.301 100.375ZM286.037 113.489L264.742 126.033L244.053 114.328L265.349 101.784L286.037 113.489ZM265.376 100.682L286.672 88.1374L265.983 76.4322L244.687 88.9764L265.376 100.682ZM243.719 89.5465L264.408 101.252L243.113 113.796L222.424 102.091L243.719 89.5465ZM154.332 116.105L133.036 128.649L112.277 116.904L133.573 104.36L154.332 116.105ZM90.0137 130.018L111.309 117.474L132.068 129.219L110.773 141.763L90.0137 130.018ZM111.944 92.1226L132.633 103.828L111.337 116.372L90.6482 104.667L111.944 92.1226ZM89.0733 129.486L110.369 116.942L89.6803 105.237L68.3846 117.781L89.0733 129.486ZM111.004 91.5905L89.7078 104.135L69.0191 92.4295L90.3148 79.8854L111.004 91.5905ZM88.7399 104.705L68.0511 92.9997L46.7554 105.544L67.4442 117.249L88.7399 104.705ZM68.6156 67.6086L89.3744 79.3533L68.0787 91.8975L47.3199 80.1527L68.6156 67.6086ZM45.815 105.012L67.1107 92.4677L46.3519 80.7229L25.0562 93.267L45.815 105.012ZM88.4025 154.94L67.6437 143.195L89.0457 130.588L109.805 142.333L88.4025 154.94ZM67.4166 118.351L88.1053 130.056L66.7033 142.663L46.0145 130.958L67.4166 118.351ZM66.4762 117.819L45.7874 106.114L24.3853 118.721L45.0741 130.426L66.4762 117.819ZM23.4449 118.189L44.847 105.582L24.0882 93.8372L2.68611 106.444L23.4449 118.189ZM240.946 165.108L219.65 177.653L198.891 165.908L220.187 153.364L240.946 165.108ZM176.628 179.022L197.923 166.478L218.682 178.223L197.387 190.767L176.628 179.022ZM198.558 141.126L219.247 152.832L197.951 165.376L177.262 153.671L198.558 141.126ZM175.687 178.49L196.983 165.946L176.294 154.241L154.999 166.785L175.687 178.49ZM197.618 140.594L176.322 153.139L155.633 141.433L176.929 128.889L197.618 140.594ZM175.354 153.709L154.665 142.004L133.369 154.548L154.058 166.253L175.354 153.709ZM155.23 116.612L175.988 128.357L154.693 140.901L133.934 129.157L155.23 116.612ZM132.429 154.016L153.725 141.471L132.966 129.727L111.67 142.271L132.429 154.016ZM175.016 203.944L154.258 192.199L175.66 179.592L196.419 191.337L175.016 203.944ZM154.031 167.355L174.719 179.06L153.317 191.667L132.628 179.962L154.031 167.355ZM153.09 166.823L132.401 155.118L110.999 167.725L131.688 179.43L153.09 166.823ZM110.059 167.193L131.461 154.586L110.702 142.841L89.3001 155.448L110.059 167.193ZM180.134 2.02757L200.892 13.7723L179.49 26.3791L158.732 14.6343L180.134 2.02757ZM180.431 26.9112L201.12 38.6163L222.522 26.0095L201.833 14.3044L180.431 26.9112ZM222.749 50.8535L202.06 39.1484L223.462 26.5416L244.151 38.2467L222.749 50.8535ZM201.092 39.7186L221.781 51.4237L200.485 63.9678L179.796 52.2627L201.092 39.7186ZM178.221 77.0822L199.517 64.538L178.828 52.8329L157.533 65.377L178.221 77.0822ZM200.152 39.1865L178.856 51.7306L158.167 40.0255L179.463 27.4814L200.152 39.1865ZM177.888 52.3008L157.199 40.5957L135.903 53.1398L156.592 64.845L177.888 52.3008ZM157.764 15.2045L178.522 26.9493L157.227 39.4934L136.468 27.7487L157.764 15.2045ZM134.963 52.6078L156.259 40.0636L135.5 28.3189L114.204 40.863L134.963 52.6078Z"
        fill="var(--gray-600)"
        fillOpacity={0.5}
      />
      <mask
        id="mask0_1066_3930"
        style={{ maskType: 'alpha' }}
        maskUnits="userSpaceOnUse"
        x="128"
        y="81"
        width="95"
        height="30"
      >
        <path
          d="M128 111H223V81V81C193.226 96.4826 157.774 96.4826 128 81V81V111Z"
          fill="#D9D9D9"
        />
      </mask>
      <g mask="url(#mask0_1066_3930)">
        <g filter="url(#filter0_b_1066_3930)">
          <path
            d="M223.508 62.9004C223.508 88.8578 202.465 109.9 176.508 109.9C150.55 109.9 129.508 88.8578 129.508 62.9004C129.508 36.943 150.55 15.9004 176.508 15.9004C202.465 15.9004 223.508 36.943 223.508 62.9004Z"
            fill="url(#paint0_radial_1066_3930)"
            fillOpacity="0.5"
          />
        </g>
        <path
          d="M223.758 62.9004C223.758 62.5548 223.754 62.2101 223.747 61.8662L223.497 61.8716C223.482 61.1852 223.453 60.5024 223.409 59.8235L223.658 59.8074C223.614 59.119 223.554 58.4346 223.481 57.7545L223.232 57.7814C223.158 57.0994 223.07 56.4218 222.967 55.7489L223.214 55.7112C223.11 55.029 222.991 54.3516 222.858 53.6793L222.613 53.7278C222.48 53.0548 222.333 52.387 222.171 51.7246L222.414 51.6654C222.251 50.9957 222.073 50.3315 221.881 49.6733L221.641 49.7432C221.45 49.0851 221.244 48.433 221.025 47.7872L221.262 47.7069C221.041 47.0546 220.805 46.4088 220.557 45.7696L220.324 45.8603C220.075 45.222 219.813 44.5905 219.538 43.9662L219.767 43.8654C219.489 43.2354 219.198 42.6127 218.894 41.9976L218.67 42.1083C218.367 41.4946 218.051 40.8884 217.722 40.2902L217.941 40.1698C217.61 39.5668 217.265 38.9719 216.909 38.3854L216.695 38.5153C216.339 37.9305 215.971 37.3541 215.591 36.7865L215.799 36.6474C215.416 36.0758 215.022 35.513 214.615 34.9594L214.414 35.1074C214.009 34.5561 213.592 34.0139 213.164 33.4812L213.359 33.3246C212.928 32.7887 212.486 32.2624 212.033 31.746L211.845 31.9109C211.394 31.397 210.932 30.893 210.459 30.3993L210.64 30.2264C210.164 29.73 209.678 29.2439 209.182 28.7686L209.009 28.9492C208.515 28.4764 208.011 28.0144 207.497 27.5633L207.662 27.3754C207.146 26.9222 206.619 26.4801 206.084 26.0494L205.927 26.2443C205.394 25.8162 204.852 25.3996 204.301 24.9946L204.449 24.7931C203.895 24.3866 203.332 23.9917 202.761 23.6091L202.622 23.8168C202.054 23.4368 201.478 23.0688 200.893 22.7132L201.023 22.4996C200.436 22.1429 199.841 21.7987 199.238 21.4672L199.118 21.6863C198.52 21.3574 197.914 21.0412 197.3 20.7379L197.411 20.5138C196.796 20.2099 196.173 19.9189 195.543 19.6413L195.442 19.8701C194.818 19.595 194.186 19.333 193.548 19.0846L193.639 18.8516C192.999 18.6029 192.354 18.3677 191.701 18.1463L191.621 18.3831C190.975 18.1639 190.323 17.9584 189.665 17.7669L189.735 17.5268C189.077 17.3353 188.413 17.1576 187.743 16.9943L187.684 17.2372C187.021 17.0756 186.353 16.9281 185.68 16.795L185.729 16.5497C185.057 16.4167 184.379 16.298 183.697 16.1939L183.659 16.441C182.986 16.3383 182.309 16.2498 181.627 16.1759L181.654 15.9274C180.974 15.8537 180.289 15.7945 179.601 15.75L179.585 15.9995C178.906 15.9556 178.223 15.9262 177.537 15.9114L177.542 15.6615C177.198 15.6541 176.853 15.6504 176.508 15.6504C176.162 15.6504 175.817 15.6541 175.474 15.6615L175.479 15.9114C174.793 15.9262 174.11 15.9556 173.431 15.9995L173.415 15.75C172.726 15.7945 172.042 15.8537 171.362 15.9274L171.389 16.1759C170.707 16.2498 170.029 16.3383 169.356 16.441L169.319 16.1939C168.636 16.298 167.959 16.4167 167.287 16.5497L167.335 16.795C166.662 16.9281 165.994 17.0756 165.332 17.2372L165.273 16.9943C164.603 17.1576 163.939 17.3353 163.281 17.5268L163.351 17.7668C162.693 17.9584 162.04 18.1639 161.395 18.3831L161.314 18.1463C160.662 18.3677 160.016 18.6029 159.377 18.8516L159.468 19.0846C158.829 19.333 158.198 19.595 157.574 19.8701L157.473 19.6413C156.843 19.9189 156.22 20.2098 155.605 20.5138L155.716 20.7379C155.102 21.0411 154.496 21.3574 153.898 21.6863L153.777 21.4672C153.174 21.7987 152.579 22.1429 151.993 22.4996L152.123 22.7132C151.538 23.0688 150.962 23.4368 150.394 23.8168L150.255 23.6091C149.683 23.9917 149.12 24.3865 148.567 24.7931L148.715 24.9946C148.164 25.3996 147.621 25.8162 147.089 26.2443L146.932 26.0494C146.396 26.4801 145.87 26.9222 145.353 27.3754L145.518 27.5633C145.004 28.0143 144.5 28.4764 144.007 28.9492L143.834 28.7686C143.337 29.2439 142.851 29.73 142.376 30.2264L142.557 30.3993C142.084 30.893 141.622 31.397 141.171 31.9109L140.983 31.746C140.53 32.2624 140.087 32.7887 139.657 33.3246L139.852 33.4812C139.424 34.0139 139.007 34.5561 138.602 35.1074L138.401 34.9594C137.994 35.513 137.599 36.0758 137.217 36.6474L137.424 36.7864C137.044 37.3541 136.676 37.9305 136.321 38.5153L136.107 38.3854C135.75 38.9719 135.406 39.5668 135.075 40.1698L135.294 40.2902C134.965 40.8884 134.649 41.4946 134.345 42.1083L134.121 41.9976C133.817 42.6127 133.526 43.2354 133.249 43.8653L133.478 43.9662C133.202 44.5905 132.94 45.222 132.692 45.8603L132.459 45.7696C132.21 46.4087 131.975 47.0546 131.754 47.7068L131.99 47.7872C131.771 48.433 131.566 49.0851 131.374 49.7432L131.134 49.6733C130.943 50.3315 130.765 50.9957 130.602 51.6654L130.845 51.7246C130.683 52.3869 130.536 53.0548 130.402 53.7278L130.157 53.6792C130.024 54.3515 129.905 55.029 129.801 55.7112L130.048 55.7489C129.946 56.4218 129.857 57.0994 129.783 57.7814L129.535 57.7544C129.461 58.4345 129.402 59.1189 129.357 59.8074L129.607 59.8235C129.563 60.5024 129.534 61.1852 129.519 61.8716L129.269 61.8662C129.262 62.2101 129.258 62.5548 129.258 62.9004C129.258 63.246 129.262 63.5907 129.269 63.9345L129.519 63.9292C129.534 64.6156 129.563 65.2984 129.607 65.9773L129.357 65.9934C129.402 66.6818 129.461 67.3662 129.535 68.0463L129.783 68.0194C129.857 68.7014 129.946 69.379 130.048 70.0519L129.801 70.0896C129.905 70.7718 130.024 71.4492 130.157 72.1215L130.402 72.073C130.536 72.746 130.683 73.4138 130.845 74.0761L130.602 74.1354C130.765 74.8051 130.943 75.4692 131.134 76.1274L131.374 76.0576C131.566 76.7157 131.771 77.3678 131.99 78.0136L131.754 78.0939C131.975 78.7462 132.21 79.392 132.459 80.0311L132.692 79.9405C132.94 80.5787 133.202 81.2102 133.478 81.8346L133.249 81.9354C133.526 82.5654 133.817 83.1881 134.121 83.8032L134.345 83.6925C134.649 84.3062 134.965 84.9123 135.294 85.5106L135.075 85.631C135.406 86.2339 135.75 86.8289 136.107 87.4154L136.321 87.2855C136.676 87.8703 137.044 88.4467 137.424 89.0143L137.216 89.1534C137.599 89.725 137.994 90.2878 138.401 90.8413L138.602 90.6934C139.007 91.2447 139.424 91.7869 139.852 92.3195L139.657 92.4761C140.087 93.0121 140.53 93.5384 140.983 94.0548L141.171 93.8899C141.622 94.4038 142.084 94.9078 142.557 95.4015L142.376 95.5744C142.851 96.0708 143.337 96.5568 143.834 97.0322L144.007 96.8516C144.5 97.3243 145.004 97.7864 145.518 98.2375L145.353 98.4254C145.87 98.8786 146.396 99.3207 146.932 99.7514L147.089 99.5565C147.621 99.9846 148.163 100.401 148.715 100.806L148.567 101.008C149.12 101.414 149.683 101.809 150.255 102.192L150.394 101.984C150.962 102.364 151.538 102.732 152.123 103.088L151.993 103.301C152.579 103.658 153.174 104.002 153.777 104.334L153.898 104.115C154.496 104.443 155.102 104.76 155.716 105.063L155.605 105.287C156.22 105.591 156.843 105.882 157.473 106.159L157.574 105.931C158.198 106.206 158.829 106.468 159.468 106.716L159.377 106.949C160.016 107.198 160.662 107.433 161.314 107.654L161.395 107.418C162.04 107.637 162.693 107.842 163.351 108.034L163.281 108.274C163.939 108.466 164.603 108.643 165.273 108.806L165.332 108.564C165.994 108.725 166.662 108.873 167.335 109.006L167.287 109.251C167.959 109.384 168.636 109.503 169.319 109.607L169.356 109.36C170.029 109.463 170.707 109.551 171.389 109.625L171.362 109.873C172.042 109.947 172.726 110.006 173.415 110.051L173.431 109.801C174.11 109.845 174.793 109.875 175.479 109.889L175.474 110.139C175.817 110.147 176.162 110.15 176.508 110.15C176.853 110.15 177.198 110.147 177.542 110.139L177.537 109.889C178.223 109.875 178.906 109.845 179.585 109.801L179.601 110.051C180.289 110.006 180.974 109.947 181.654 109.873L181.627 109.625C182.309 109.551 182.986 109.463 183.659 109.36L183.697 109.607C184.379 109.503 185.057 109.384 185.729 109.251L185.68 109.006C186.353 108.873 187.021 108.725 187.684 108.564L187.743 108.806C188.413 108.643 189.077 108.466 189.735 108.274L189.665 108.034C190.323 107.842 190.975 107.637 191.621 107.418L191.701 107.654C192.354 107.433 192.999 107.198 193.639 106.949L193.548 106.716C194.186 106.468 194.818 106.206 195.442 105.931L195.543 106.159C196.173 105.882 196.795 105.591 197.411 105.287L197.3 105.063C197.914 104.76 198.52 104.443 199.118 104.115L199.238 104.334C199.841 104.002 200.436 103.658 201.023 103.301L200.893 103.088C201.478 102.732 202.054 102.364 202.622 101.984L202.761 102.192C203.332 101.809 203.895 101.414 204.449 101.008L204.301 100.806C204.852 100.401 205.394 99.9846 205.927 99.5565L206.084 99.7514C206.619 99.3207 207.146 98.8786 207.662 98.4254L207.497 98.2375C208.011 97.7864 208.515 97.3244 209.009 96.8516L209.182 97.0322C209.678 96.5568 210.164 96.0708 210.64 95.5744L210.459 95.4015C210.932 94.9078 211.394 94.4038 211.845 93.8899L212.033 94.0548C212.486 93.5384 212.928 93.0121 213.359 92.4761L213.164 92.3195C213.592 91.7869 214.009 91.2447 214.414 90.6934L214.615 90.8414C215.022 90.2878 215.416 89.725 215.799 89.1534L215.591 89.0143C215.971 88.4467 216.339 87.8703 216.695 87.2855L216.909 87.4154C217.265 86.8289 217.61 86.234 217.941 85.631L217.722 85.5106C218.051 84.9124 218.367 84.3062 218.67 83.6925L218.894 83.8032C219.198 83.1881 219.489 82.5654 219.767 81.9354L219.538 81.8346C219.813 81.2103 220.075 80.5787 220.324 79.9405L220.557 80.0312C220.805 79.392 221.041 78.7462 221.262 78.0939L221.025 78.0136C221.244 77.3678 221.45 76.7157 221.641 76.0576L221.881 76.1275C222.073 75.4693 222.251 74.8051 222.414 74.1354L222.171 74.0762C222.333 73.4138 222.48 72.746 222.613 72.073L222.858 72.1215C222.991 71.4492 223.11 70.7718 223.214 70.0896L222.967 70.0519C223.07 69.379 223.158 68.7014 223.232 68.0194L223.481 68.0463C223.554 67.3662 223.614 66.6818 223.658 65.9934L223.409 65.9773C223.453 65.2984 223.482 64.6156 223.497 63.9292L223.747 63.9346C223.754 63.5907 223.758 63.246 223.758 62.9004Z"
          fill="url(#paint1_radial_1066_3930)"
          fillOpacity="0.5"
          strokeOpacity="0.7"
          stroke="var(--maximeheckel-colors-typeface-secondary)"
          strokeWidth="0.5"
          strokeDasharray="2 2"
        />
      </g>
      <motion.path
        d="M175.008 222.314L177 4.5"
        initial="initial"
        animate="revealed"
        stroke="#FF6813"
        variants={pathVariants}
      />
      <motion.path
        d="M174.969 222.312L152.501 8.50001"
        initial="initial"
        animate="revealed"
        stroke="#FF6813"
        variants={pathVariants}
      />
      <motion.path
        d="M174.969 222.314L201 10"
        initial="initial"
        animate="revealed"
        stroke="#FF6813"
        variants={pathVariants}
      />
      <mask
        id="mask1_1066_3930"
        style={{ maskType: 'alpha' }}
        maskUnits="userSpaceOnUse"
        x="128"
        y="15"
        width="96"
        height="78"
      >
        <path
          d="M128 15H224V81.0894L223.202 81.4991C193.292 96.8602 157.777 96.7073 128 81.0894V81.0894V15Z"
          fill="#D9D9D9"
        />
      </mask>
      <g mask="url(#mask1_1066_3930)">
        <g filter="url(#filter1_b_1066_3930)">
          <path
            d="M223.508 62.9004C223.508 88.8578 202.465 109.9 176.508 109.9C150.55 109.9 129.508 88.8578 129.508 62.9004C129.508 36.943 150.55 15.9004 176.508 15.9004C202.465 15.9004 223.508 36.943 223.508 62.9004Z"
            fill="url(#paint2_radial_1066_3930)"
            fillOpacity="0.5"
          />
        </g>
        <path
          d="M223.758 62.9004C223.758 62.5548 223.754 62.2101 223.747 61.8662L223.497 61.8716C223.482 61.1852 223.453 60.5024 223.409 59.8235L223.658 59.8074C223.614 59.119 223.554 58.4346 223.481 57.7545L223.232 57.7814C223.158 57.0994 223.07 56.4218 222.967 55.7489L223.214 55.7112C223.11 55.029 222.991 54.3516 222.858 53.6793L222.613 53.7278C222.48 53.0548 222.333 52.387 222.171 51.7246L222.414 51.6654C222.251 50.9957 222.073 50.3315 221.881 49.6733L221.641 49.7432C221.45 49.0851 221.244 48.433 221.025 47.7872L221.262 47.7069C221.041 47.0546 220.805 46.4088 220.557 45.7696L220.324 45.8603C220.075 45.222 219.813 44.5905 219.538 43.9662L219.767 43.8654C219.489 43.2354 219.198 42.6127 218.894 41.9976L218.67 42.1083C218.367 41.4946 218.051 40.8884 217.722 40.2902L217.941 40.1698C217.61 39.5668 217.265 38.9719 216.909 38.3854L216.695 38.5153C216.339 37.9305 215.971 37.3541 215.591 36.7865L215.799 36.6474C215.416 36.0758 215.022 35.513 214.615 34.9594L214.414 35.1074C214.009 34.5561 213.592 34.0139 213.164 33.4812L213.359 33.3246C212.928 32.7887 212.486 32.2624 212.033 31.746L211.845 31.9109C211.394 31.397 210.932 30.893 210.459 30.3993L210.64 30.2264C210.164 29.73 209.678 29.2439 209.182 28.7686L209.009 28.9492C208.515 28.4764 208.011 28.0144 207.497 27.5633L207.662 27.3754C207.146 26.9222 206.619 26.4801 206.084 26.0494L205.927 26.2443C205.394 25.8162 204.852 25.3996 204.301 24.9946L204.449 24.7931C203.895 24.3866 203.332 23.9917 202.761 23.6091L202.622 23.8168C202.054 23.4368 201.478 23.0688 200.893 22.7132L201.023 22.4996C200.436 22.1429 199.841 21.7987 199.238 21.4672L199.118 21.6863C198.52 21.3574 197.914 21.0412 197.3 20.7379L197.411 20.5138C196.796 20.2099 196.173 19.9189 195.543 19.6413L195.442 19.8701C194.818 19.595 194.186 19.333 193.548 19.0846L193.639 18.8516C192.999 18.6029 192.354 18.3677 191.701 18.1463L191.621 18.3831C190.975 18.1639 190.323 17.9584 189.665 17.7669L189.735 17.5268C189.077 17.3353 188.413 17.1576 187.743 16.9943L187.684 17.2372C187.021 17.0756 186.353 16.9281 185.68 16.795L185.729 16.5497C185.057 16.4167 184.379 16.298 183.697 16.1939L183.659 16.441C182.986 16.3383 182.309 16.2498 181.627 16.1759L181.654 15.9274C180.974 15.8537 180.289 15.7945 179.601 15.75L179.585 15.9995C178.906 15.9556 178.223 15.9262 177.537 15.9114L177.542 15.6615C177.198 15.6541 176.853 15.6504 176.508 15.6504C176.162 15.6504 175.817 15.6541 175.474 15.6615L175.479 15.9114C174.793 15.9262 174.11 15.9556 173.431 15.9995L173.415 15.75C172.726 15.7945 172.042 15.8537 171.362 15.9274L171.389 16.1759C170.707 16.2498 170.029 16.3383 169.356 16.441L169.319 16.1939C168.636 16.298 167.959 16.4167 167.287 16.5497L167.335 16.795C166.662 16.9281 165.994 17.0756 165.332 17.2372L165.273 16.9943C164.603 17.1576 163.939 17.3353 163.281 17.5268L163.351 17.7668C162.693 17.9584 162.04 18.1639 161.395 18.3831L161.314 18.1463C160.662 18.3677 160.016 18.6029 159.377 18.8516L159.468 19.0846C158.829 19.333 158.198 19.595 157.574 19.8701L157.473 19.6413C156.843 19.9189 156.22 20.2098 155.605 20.5138L155.716 20.7379C155.102 21.0411 154.496 21.3574 153.898 21.6863L153.777 21.4672C153.174 21.7987 152.579 22.1429 151.993 22.4996L152.123 22.7132C151.538 23.0688 150.962 23.4368 150.394 23.8168L150.255 23.6091C149.683 23.9917 149.12 24.3865 148.567 24.7931L148.715 24.9946C148.164 25.3996 147.621 25.8162 147.089 26.2443L146.932 26.0494C146.396 26.4801 145.87 26.9222 145.353 27.3754L145.518 27.5633C145.004 28.0143 144.5 28.4764 144.007 28.9492L143.834 28.7686C143.337 29.2439 142.851 29.73 142.376 30.2264L142.557 30.3993C142.084 30.893 141.622 31.397 141.171 31.9109L140.983 31.746C140.53 32.2624 140.087 32.7887 139.657 33.3246L139.852 33.4812C139.424 34.0139 139.007 34.5561 138.602 35.1074L138.401 34.9594C137.994 35.513 137.599 36.0758 137.217 36.6474L137.424 36.7864C137.044 37.3541 136.676 37.9305 136.321 38.5153L136.107 38.3854C135.75 38.9719 135.406 39.5668 135.075 40.1698L135.294 40.2902C134.965 40.8884 134.649 41.4946 134.345 42.1083L134.121 41.9976C133.817 42.6127 133.526 43.2354 133.249 43.8653L133.478 43.9662C133.202 44.5905 132.94 45.222 132.692 45.8603L132.459 45.7696C132.21 46.4087 131.975 47.0546 131.754 47.7068L131.99 47.7872C131.771 48.433 131.566 49.0851 131.374 49.7432L131.134 49.6733C130.943 50.3315 130.765 50.9957 130.602 51.6654L130.845 51.7246C130.683 52.3869 130.536 53.0548 130.402 53.7278L130.157 53.6792C130.024 54.3515 129.905 55.029 129.801 55.7112L130.048 55.7489C129.946 56.4218 129.857 57.0994 129.783 57.7814L129.535 57.7544C129.461 58.4345 129.402 59.1189 129.357 59.8074L129.607 59.8235C129.563 60.5024 129.534 61.1852 129.519 61.8716L129.269 61.8662C129.262 62.2101 129.258 62.5548 129.258 62.9004C129.258 63.246 129.262 63.5907 129.269 63.9345L129.519 63.9292C129.534 64.6156 129.563 65.2984 129.607 65.9773L129.357 65.9934C129.402 66.6818 129.461 67.3662 129.535 68.0463L129.783 68.0194C129.857 68.7014 129.946 69.379 130.048 70.0519L129.801 70.0896C129.905 70.7718 130.024 71.4492 130.157 72.1215L130.402 72.073C130.536 72.746 130.683 73.4138 130.845 74.0761L130.602 74.1354C130.765 74.8051 130.943 75.4692 131.134 76.1274L131.374 76.0576C131.566 76.7157 131.771 77.3678 131.99 78.0136L131.754 78.0939C131.975 78.7462 132.21 79.392 132.459 80.0311L132.692 79.9405C132.94 80.5787 133.202 81.2102 133.478 81.8346L133.249 81.9354C133.526 82.5654 133.817 83.1881 134.121 83.8032L134.345 83.6925C134.649 84.3062 134.965 84.9123 135.294 85.5106L135.075 85.631C135.406 86.2339 135.75 86.8289 136.107 87.4154L136.321 87.2855C136.676 87.8703 137.044 88.4467 137.424 89.0143L137.216 89.1534C137.599 89.725 137.994 90.2878 138.401 90.8413L138.602 90.6934C139.007 91.2447 139.424 91.7869 139.852 92.3195L139.657 92.4761C140.087 93.0121 140.53 93.5384 140.983 94.0548L141.171 93.8899C141.622 94.4038 142.084 94.9078 142.557 95.4015L142.376 95.5744C142.851 96.0708 143.337 96.5568 143.834 97.0322L144.007 96.8516C144.5 97.3243 145.004 97.7864 145.518 98.2375L145.353 98.4254C145.87 98.8786 146.396 99.3207 146.932 99.7514L147.089 99.5565C147.621 99.9846 148.163 100.401 148.715 100.806L148.567 101.008C149.12 101.414 149.683 101.809 150.255 102.192L150.394 101.984C150.962 102.364 151.538 102.732 152.123 103.088L151.993 103.301C152.579 103.658 153.174 104.002 153.777 104.334L153.898 104.115C154.496 104.443 155.102 104.76 155.716 105.063L155.605 105.287C156.22 105.591 156.843 105.882 157.473 106.159L157.574 105.931C158.198 106.206 158.829 106.468 159.468 106.716L159.377 106.949C160.016 107.198 160.662 107.433 161.314 107.654L161.395 107.418C162.04 107.637 162.693 107.842 163.351 108.034L163.281 108.274C163.939 108.466 164.603 108.643 165.273 108.806L165.332 108.564C165.994 108.725 166.662 108.873 167.335 109.006L167.287 109.251C167.959 109.384 168.636 109.503 169.319 109.607L169.356 109.36C170.029 109.463 170.707 109.551 171.389 109.625L171.362 109.873C172.042 109.947 172.726 110.006 173.415 110.051L173.431 109.801C174.11 109.845 174.793 109.875 175.479 109.889L175.474 110.139C175.817 110.147 176.162 110.15 176.508 110.15C176.853 110.15 177.198 110.147 177.542 110.139L177.537 109.889C178.223 109.875 178.906 109.845 179.585 109.801L179.601 110.051C180.289 110.006 180.974 109.947 181.654 109.873L181.627 109.625C182.309 109.551 182.986 109.463 183.659 109.36L183.697 109.607C184.379 109.503 185.057 109.384 185.729 109.251L185.68 109.006C186.353 108.873 187.021 108.725 187.684 108.564L187.743 108.806C188.413 108.643 189.077 108.466 189.735 108.274L189.665 108.034C190.323 107.842 190.975 107.637 191.621 107.418L191.701 107.654C192.354 107.433 192.999 107.198 193.639 106.949L193.548 106.716C194.186 106.468 194.818 106.206 195.442 105.931L195.543 106.159C196.173 105.882 196.795 105.591 197.411 105.287L197.3 105.063C197.914 104.76 198.52 104.443 199.118 104.115L199.238 104.334C199.841 104.002 200.436 103.658 201.023 103.301L200.893 103.088C201.478 102.732 202.054 102.364 202.622 101.984L202.761 102.192C203.332 101.809 203.895 101.414 204.449 101.008L204.301 100.806C204.852 100.401 205.394 99.9846 205.927 99.5565L206.084 99.7514C206.619 99.3207 207.146 98.8786 207.662 98.4254L207.497 98.2375C208.011 97.7864 208.515 97.3244 209.009 96.8516L209.182 97.0322C209.678 96.5568 210.164 96.0708 210.64 95.5744L210.459 95.4015C210.932 94.9078 211.394 94.4038 211.845 93.8899L212.033 94.0548C212.486 93.5384 212.928 93.0121 213.359 92.4761L213.164 92.3195C213.592 91.7869 214.009 91.2447 214.414 90.6934L214.615 90.8414C215.022 90.2878 215.416 89.725 215.799 89.1534L215.591 89.0143C215.971 88.4467 216.339 87.8703 216.695 87.2855L216.909 87.4154C217.265 86.8289 217.61 86.234 217.941 85.631L217.722 85.5106C218.051 84.9124 218.367 84.3062 218.67 83.6925L218.894 83.8032C219.198 83.1881 219.489 82.5654 219.767 81.9354L219.538 81.8346C219.813 81.2102 220.075 80.5787 220.324 79.9405L220.557 80.0312C220.805 79.392 221.041 78.7462 221.262 78.0939L221.025 78.0136C221.244 77.3678 221.45 76.7157 221.641 76.0576L221.881 76.1275C222.073 75.4693 222.251 74.8051 222.414 74.1354L222.171 74.0762C222.333 73.4138 222.48 72.746 222.613 72.073L222.858 72.1215C222.991 71.4492 223.11 70.7718 223.214 70.0896L222.967 70.0519C223.07 69.379 223.158 68.7014 223.232 68.0194L223.481 68.0463C223.554 67.3662 223.614 66.6818 223.658 65.9934L223.409 65.9773C223.453 65.2984 223.482 64.6156 223.497 63.9292L223.747 63.9346C223.754 63.5907 223.758 63.246 223.758 62.9004Z"
          fill="url(#paint3_radial_1066_3930)"
          fillOpacity="0.5"
          strokeOpacity="0.7"
          stroke="var(--maximeheckel-colors-typeface-secondary)"
          strokeWidth="0.5"
          strokeDasharray="2 2"
        />
      </g>
      <defs>
        <filter
          id="filter0_b_1066_3930"
          x="128.508"
          y="14.9004"
          width="96"
          height="96"
          filterUnits="userSpaceOnUse"
          colorInterpolationFilters="sRGB"
        >
          <feFlood floodOpacity="0" result="BackgroundImageFix" />
          <feGaussianBlur in="BackgroundImageFix" stdDeviation="0.5" />
          <feComposite
            in2="SourceAlpha"
            operator="in"
            result="effect1_backgroundBlur_1066_3930"
          />
          <feBlend
            mode="normal"
            in="SourceGraphic"
            in2="effect1_backgroundBlur_1066_3930"
            result="shape"
          />
        </filter>
        <filter
          id="filter1_b_1066_3930"
          x="128.508"
          y="14.9004"
          width="96"
          height="96"
          filterUnits="userSpaceOnUse"
          colorInterpolationFilters="sRGB"
        >
          <feFlood floodOpacity="0" result="BackgroundImageFix" />
          <feGaussianBlur in="BackgroundImageFix" stdDeviation="0.5" />
          <feComposite
            in2="SourceAlpha"
            operator="in"
            result="effect1_backgroundBlur_1066_3930"
          />
          <feBlend
            mode="normal"
            in="SourceGraphic"
            in2="effect1_backgroundBlur_1066_3930"
            result="shape"
          />
        </filter>
        <radialGradient
          id="paint0_radial_1066_3930"
          cx="0"
          cy="0"
          r="1"
          gradientUnits="userSpaceOnUse"
          gradientTransform="translate(176.508 62.9004) rotate(90) scale(47)"
        >
          <stop offset="0.416667" stopColor="#5786F5" />
          <stop offset="0.661458" stopColor="#5786F5" stopOpacity="0.8" />
          <stop offset="1" stopColor="#5786F5" stopOpacity="0.1" />
        </radialGradient>
        <radialGradient
          id="paint1_radial_1066_3930"
          cx="0"
          cy="0"
          r="1"
          gradientUnits="userSpaceOnUse"
          gradientTransform="translate(176.508 62.9004) rotate(90) scale(47)"
        >
          <stop offset="0.416667" stopColor="#5786F5" />
          <stop offset="0.661458" stopColor="#5786F5" stopOpacity="0.8" />
          <stop offset="1" stopColor="#5786F5" stopOpacity="0.1" />
        </radialGradient>
        <radialGradient
          id="paint2_radial_1066_3930"
          cx="0"
          cy="0"
          r="1"
          gradientUnits="userSpaceOnUse"
          gradientTransform="translate(176.508 62.9004) rotate(90) scale(47)"
        >
          <stop offset="0.416667" stopColor="#5786F5" />
          <stop offset="0.661458" stopColor="#5786F5" stopOpacity="0.8" />
          <stop offset="1" stopColor="#5786F5" stopOpacity="0.1" />
        </radialGradient>
        <radialGradient
          id="paint3_radial_1066_3930"
          cx="0"
          cy="0"
          r="1"
          gradientUnits="userSpaceOnUse"
          gradientTransform="translate(176.508 62.9004) rotate(90) scale(47)"
        >
          <stop offset="0.416667" stopColor="#5786F5" />
          <stop offset="0.661458" stopColor="#5786F5" stopOpacity="0.8" />
          <stop offset="1" stopColor="#5786F5" stopOpacity="0.1" />
        </radialGradient>
      </defs>
    </svg>
  );
};

export default VolumetricRaymarchingVisualizer;
